---
title: let/const命令
date: 2019-12-30 11:51:13
tags:
    - let
    - const
categories:
    - [前端, ES6]
---

根据阮一峰的《ECMAScript 6 入门》的教程所做的一些个人总结和思考

<!-- more -->

### let/const

#### 死区

采用块级作用域，不存在**变量提升**，会产生暂时性**死区**。 ES6 明确规定，如果区块中存在 let 和 const 命令，这个区块对这些命令声明的变量，从一开始就形成了封闭作用域。凡是在声明之前就使用这些变量，就会报错

```
var tmp = 123;

if (true) {
  tmp = 'abc'; // ReferenceError
  let tmp; // 在当前块作用域 tmp属于声明之前就使用 so 报错
}
```

#### 函数声明不会提升

由于为了兼容老代码，在支持 ES6 的浏览器中会有所修改

-   允许在块级作用域内声明函数。
-   函数声明类似于 var，即会提升到全局作用域或函数作用域的头部。
-   同时，函数声明还会提升到所在的块级作用域的头部。

#### const 本质

> const 实际上保证的，并不是变量的值不得改动，而是变量**指向的内存地址**所保存的数据不得改动。

-   对于简单类型的数据（数值、字符串、布尔值）: 值就保存在变量指向的那个内存地址，因此等同于常量。
-   但对于复合类型的数据（主要是对象和数组），变量指向的内存地址，保存的只是一个指向实际数据的指针，const 只能保证这个指针是固定的（即总是指向另一个固定的地址），至于它指向的数据结构是不是可变的，就完全不能控制了。
