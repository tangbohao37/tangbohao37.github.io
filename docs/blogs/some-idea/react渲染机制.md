# react 渲染机制理解

与其想办法优化性能不如一开始就不让性能问题出现

## 依赖决定执行

- 状态
- props

---> 父组件执行子组件一定重新执行

如果子组件 props 是常量呢？ -----> 一样重新执行

如果子组件十分巨大怎么办？且一定不想让它执行

如果一定不想子组件执行加 memo

但是我们一般不这么写，因为维护麻烦

那如何优化这种情况呢？
一般当虚拟列表处理

一般业务不会是这种情况，但是一般一个 view 下 会有其他 render 部分

这部分如果是纯渲染逻辑则用 useMemo 包裹。 如果是复杂逻辑则新建组件，重复上面的优化方法

何时使用 useCallback

console.log('arr[1] === arr[0]', arr[1] === arr[0]);

为什么要把依赖写全？

## react 思维 代码反例

用 useEffect 赋初始值很容易出现问题
